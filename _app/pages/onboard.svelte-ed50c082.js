import{S as J,i as G,s as M,e as O,k as $,Q as z,c as S,a as y,d as b,n as E,R as Q,b as v,f as x,G as g,K as j,A as B,N as U,O as q,j as k,E as K,m as C,o as R,P as V,x as A,u as P,v as N}from"../chunks/vendor-3c118b73.js";import{S as L,N as W}from"../chunks/Sidebar-cd3a2008.js";/* empty css                                                      */class X{constructor(e){this._anchor=e}load(e){let t=function(a){return a.dependsOn},i=d3.dagStratify().parentIds(t)(e),s=20,n=d3.sugiyama().decross(d3.decrossOpt()).nodeSize(a=>[(a?3.6:.25)*s,3*s]),{width:d,height:o}=n(i),l=d3.select("#"+this._anchor);l.attr("viewBox",[0,0,d,o].join(" "));let c=l.append("defs"),h=i.size(),f=d3.interpolateRainbow,m=new Map;for(let[a,u]of i.idescendants().entries())m.set(u.data.id,f(a/h));let T=d3.line().curve(d3.curveCatmullRom).x(a=>a.x).y(a=>a.y);l.append("g").selectAll("path").data(i.links()).enter().append("path").attr("d",({points:a})=>T(a)).attr("fill","none").attr("stroke-width",3).attr("stroke",({source:a,target:u})=>{let w=encodeURIComponent(`${a.data.id}--${u.data.id}`),D=c.append("linearGradient").attr("id",w).attr("gradientUnits","userSpaceOnUse").attr("x1",a.x).attr("x2",u.x).attr("y1",a.y).attr("y2",u.y);return D.append("stop").attr("offset","0%").attr("stop-color",m.get(a.data.id)),D.append("stop").attr("offset","100%").attr("stop-color",m.get(u.data.id)),`url(#${w})`});let r=l.append("g").selectAll("g").data(i.descendants()).enter().append("g").attr("transform",({x:a,y:u})=>`translate(${a}, ${u})`);r.append("circle").attr("r",s).attr("fill",a=>m.get(a.data.id)),r.append("text").text(a=>a.data.id).style("font-size","4px").attr("font-weight","bold").attr("font-family","sans-serif").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","white").on("click",function(a,u){console.log("d3dag click "+JSON.stringify(u.data.id)+" "+JSON.stringify(u))})}}class F{constructor(e){this._id=e,this._events={}}static create(e){return new F(e)}logger(e){console.log(`${this._id} ${e}`)}publish(e,t){if(!!this._events.hasOwnProperty(e))for(let i of this._events[e])setTimeout(()=>i(e,t),0)}subscribe(e,t){this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}subscribers(){return this._events}unsubscribe(e){this._events.hasOwnProperty(e)&&delete this._events[e]}}class H{constructor(e,t){this._id=e,this._eventEmitter=t,this._state={active:!1,task:{}}}static create(e,t){return new H(e,t)}logger(e,t,i={}){t.mode!==void 0&&t.mode==="debug"&&console.log(`${e}`,JSON.stringify(t,null,2),i)}staticstubHandler(e,t,i){let s=function(n,d,o){console.log(`handler ${n.handler} `,JSON.stringify({id:n.id,description:n.description,dependsOn:n.onEvent.join(",")})),o(n.publishEvent,d)};setTimeout(()=>s(e,t,i),Math.floor(Math.random()*1e3))}route(e){let t=this,i=Object.assign({},e,{lifecycle:this._id});return typeof this[i.handler]=="function"&&i.handler,function(s,n){t.publish(i.publishEvent,n)}}publish(e,t={}){console.log("lifecycleHandler.publish:",e),this._eventEmitter.publish(e,t)}subscribe(e,t){this._eventEmitter.subscribe(e,t)}subscribers(){return this._eventEmitter.subscribers()}trigger(e,t){console.log("lifecycleHandler.trigger:",e),this.publish(e,t)}}class I{constructor(e){this._id=e}static createTask(e){return typeof e.id!="string"?{task:{},err:"task.id must be type string"}:typeof e.description!="string"?{task:{},err:"task.description must be type string"}:Array.isArray(e.dependsOn)?typeof e.handler!="string"?{task:{},err:"task.handler must be type string"}:typeof e.params!="object"?{task:{},err:"task.params must be type object"}:typeof e.eventType!="string"?{task:{},err:"task.eventType must be type string"}:{task:{id:e.id,description:e.description,dependsOn:e.dependsOn,handler:e.handler,params:e.params,eventType:e.eventType,onEvent:_.map(e.dependsOn,t=>t+":done"),publishEvent:e.id+":done"},err:null}:{task:{},err:`${e.id} task.dependsOn must be type array`}}static parse(e,t){let i=[],s=[];return _.forEach(t,n=>{let{task:d,err:o}=I.createTask(n);o?s.push(o):i.push(d)}),{tasks:i,err:s}}}class Y{constructor(e){this._id=e,this._lifecycleHandler=H.create(e,F.create(e)),console.log("Pipeline started with id: "+e)}setupEventSubscriptions(e){let{tasks:t,err:i}=I.parse(this._id,e);_.forEach(t,s=>{_.forEach(s.onEvent,n=>{let d=this._lifecycleHandler.route.apply(this._lifecycleHandler,[s]);this._lifecycleHandler.subscribe(n,d)})})}listEventSubscriptions(){return this._lifecycleHandler.subscribers()}start(){console.log("start trigger"),this._lifecycleHandler.trigger("flow:create:done",{})}}function Z(p){let e,t,i,s,n,d,o,l;return{c(){e=O("main"),t=O("div"),i=$(),s=O("div"),n=O("div"),d=$(),o=O("div"),l=z("svg"),this.h()},l(c){e=S(c,"MAIN",{});var h=y(e);t=S(h,"DIV",{class:!0}),y(t).forEach(b),i=E(h),s=S(h,"DIV",{class:!0});var f=y(s);n=S(f,"DIV",{id:!0,class:!0}),y(n).forEach(b),d=E(f),o=S(f,"DIV",{class:!0});var m=y(o);l=Q(m,"svg",{id:!0}),y(l).forEach(b),m.forEach(b),f.forEach(b),h.forEach(b),this.h()},h(){v(t,"class","support-grid"),v(n,"id","glossary"),v(n,"class","glossary"),v(l,"id","dag"),v(o,"class","dag"),v(s,"class","onboard")},m(c,h){x(c,e,h),g(e,t),g(e,i),g(e,s),g(s,n),g(s,d),g(s,o),g(o,l)},p:j,i:j,o:j,d(c){c&&b(e)}}}function ee(p,e,t){let{data:i}=e,{anchor:s}=e;const n=new Y("wtf"),d=[{id:"flow:start",description:"Start flow button was clicked by user",eventType:"app",dependsOn:[],handler:"flowStart",params:{}},{id:"flow:configure",description:"Configure Flow",eventType:"app",dependsOn:["flow:start"],handler:"flowConfigure",params:{variant:"release"}},{id:"flow:publish",description:"Publish Flow Configuration",eventType:"app",dependsOn:["flow:configure"],handler:"flowPublish",params:{variant:"release"}},{id:"flow:create",description:"Create Flow",eventType:"app",dependsOn:["flow:configure"],handler:"flowCreate",params:{variant:"release"}},{id:"flow:run",description:"Run flow",eventType:"app",dependsOn:["flow:create"],handler:"flowRun",params:{variant:"release"}},{id:"flow:assembly",description:"Assemble Flow Artifacts",eventType:"app",dependsOn:["flow:run"],handler:"flowAssembly",params:{variant:"release"}},{id:"flow:report",description:"Generate Flow Report",eventType:"app",dependsOn:["flow:run"],handler:"flowReport",params:{variant:"release"}},{id:"flow:upload",description:"Publish flow artifacts",eventType:"app",dependsOn:["flow:report"],handler:"flowUpload",params:{variant:"release"}}],o={text:"Select Glossary",state:{opened:!0,selected:!0},children:[{text:"Upload"},{text:"Start"},{text:"Create"},{text:"Report"},{text:"Configure"},{text:"Publish"},{text:"Run"},{text:"Assemble"}]};return B(async()=>{new X(s).load(i),n.setupEventSubscriptions(d),console.log("subscribers:",n.listEventSubscriptions()),n.start();let c=jQuery.jstree.defaults.contextmenu.items();console.log("glossary menu items:"+JSON.stringify(c)),jQuery("#glossary").jstree({core:{data:[o],check_callback:!0},plugins:["contextmenu","dnd","search","state","types","wholerow"]}).on("rename_node.jstree",function(h,f){console.log("you clicked jstree jquery created or renamed node "+JSON.stringify(f.node.text))}).on("delete_node.jstree",function(h,f){console.log("you clicked jstree jquery deleted node "+JSON.stringify(f.node.text))})}),p.$$set=l=>{"data"in l&&t(0,i=l.data),"anchor"in l&&t(1,s=l.anchor)},[i,s,n]}class te extends J{constructor(e){super();G(this,e,ee,Z,M,{data:0,anchor:1,pipeline:2})}get pipeline(){return this.$$.ctx[2]}}function re(p){let e,t,i,s,n,d,o,l,c;function h(r){p[3](r)}let f={articles:p[1]};p[0]!==void 0&&(f.open=p[0]),t=new L({props:f}),U.push(()=>q(t,"open",h));function m(r){p[4](r)}let T={};return p[0]!==void 0&&(T.sidebar=p[0]),n=new W({props:T}),U.push(()=>q(n,"sidebar",m)),l=new te({props:{anchor:ne,data:p[2]}}),{c(){e=$(),k(t.$$.fragment),s=$(),k(n.$$.fragment),o=$(),k(l.$$.fragment),this.h()},l(r){K('[data-svelte="svelte-fckimb"]',document.head).forEach(b),e=E(r),C(t.$$.fragment,r),s=E(r),C(n.$$.fragment,r),o=E(r),C(l.$$.fragment,r),this.h()},h(){document.title="Onboard 0.1"},m(r,a){x(r,e,a),R(t,r,a),x(r,s,a),R(n,r,a),x(r,o,a),R(l,r,a),c=!0},p(r,[a]){const u={};!i&&a&1&&(i=!0,u.open=r[0],V(()=>i=!1)),t.$set(u);const w={};!d&&a&1&&(d=!0,w.sidebar=r[0],V(()=>d=!1)),n.$set(w)},i(r){c||(A(t.$$.fragment,r),A(n.$$.fragment,r),A(l.$$.fragment,r),c=!0)},o(r){P(t.$$.fragment,r),P(n.$$.fragment,r),P(l.$$.fragment,r),c=!1},d(r){r&&b(e),N(t,r),r&&b(s),N(n,r),r&&b(o),N(l,r)}}}let ne="dag";function se(p,e,t){let i=[],s=!1;const n=[{id:"start",description:"Start flow button was clicked by user",eventType:"app",dependsOn:[],handler:"flowStart",params:{}},{id:"configure",description:"Configure Flow",eventType:"app",dependsOn:["start"],handler:"flowConfigure",params:{variant:"release"}},{id:"publish",description:"Publish Flow Configuration",eventType:"app",dependsOn:["configure"],handler:"flowPublish",params:{variant:"release"}},{id:"create",description:"Create Flow",eventType:"app",dependsOn:["configure","publish"],handler:"flowCreate",params:{variant:"release"}},{id:"run",description:"Run flow",eventType:"app",dependsOn:["create"],handler:"flowRun",params:{variant:"release"}},{id:"assembly",description:"Assemble Flow Artifacts",eventType:"app",dependsOn:["run"],handler:"flowAssembly",params:{variant:"release"}},{id:"report",description:"Generate Flow Report",eventType:"app",dependsOn:["run"],handler:"flowReport",params:{variant:"release"}},{id:"upload",description:"Publish flow artifacts",eventType:"app",dependsOn:["assembly","report"],handler:"flowUpload",params:{variant:"release"}}];function d(l){s=l,t(0,s)}function o(l){s=l,t(0,s)}return[s,i,n,d,o]}class oe extends J{constructor(e){super();G(this,e,se,re,M,{})}}export{oe as default};
