import{S as D,i as F,s as G,e as T,k as $,t as q,Q as L,c as E,a as w,d as m,n as S,g as Q,R as z,b as O,f as R,G as v,K as j,A as K,N as J,O as M,j as A,E as W,m as k,o as C,P as V,x as P,u as N,v as B}from"../chunks/vendor-3c118b73.js";import{S as X,N as Y}from"../chunks/Sidebar-cd3a2008.js";/* empty css                                                      */class Z{constructor(e){this._anchor=e}reload(e){d3.select("#"+this._anchor).selectAll("*").remove(),this.load(e)}load(e){let t=function(n){return n.dependsOn},i=d3.dagStratify().parentIds(t)(e),s=20,a=d3.sugiyama().decross(d3.decrossOpt()).nodeSize(n=>[(n?3.6:.25)*s,3*s]),{width:l,height:o}=a(i),d=d3.select("#"+this._anchor);d.attr("viewBox",[0,0,l,o].join(" "));let u=d.append("defs"),b=i.size(),h=d3.interpolateRainbow,f=new Map;for(let[n,p]of i.idescendants().entries())f.set(p.data.id,h(n/b));let g=d3.line().curve(d3.curveCatmullRom).x(n=>n.x).y(n=>n.y);d.append("g").selectAll("path").data(i.links()).enter().append("path").attr("d",({points:n})=>g(n)).attr("fill","none").attr("stroke-width",3).attr("stroke",({source:n,target:p})=>{let y=encodeURIComponent(`${n.data.id}--${p.data.id}`),x=u.append("linearGradient").attr("id",y).attr("gradientUnits","userSpaceOnUse").attr("x1",n.x).attr("x2",p.x).attr("y1",n.y).attr("y2",p.y);return x.append("stop").attr("offset","0%").attr("stop-color",f.get(n.data.id)),x.append("stop").attr("offset","100%").attr("stop-color",f.get(p.data.id)),`url(#${y})`});let r=d.append("g").selectAll("g").data(i.descendants()).enter().append("g").attr("transform",({x:n,y:p})=>`translate(${n}, ${p})`);r.append("circle").attr("r",s).attr("fill",n=>f.get(n.data.id)),r.append("text").text(n=>n.data.description).style("font-size","4px").attr("font-weight","bold").attr("font-family","sans-serif").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","white").on("click",function(n,p){console.log("d3dag click "+JSON.stringify(p.data.id)+" "+JSON.stringify(p))})}}class I{constructor(e){this._id=e,this._events={}}static create(e){return new I(e)}logger(e){console.log(`${this._id} ${e}`)}publish(e,t){if(!!this._events.hasOwnProperty(e))for(let i of this._events[e])setTimeout(()=>i(e,t),0)}subscribe(e,t){this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}subscribers(){return this._events}unsubscribe(e){this._events.hasOwnProperty(e)&&delete this._events[e]}}class H{constructor(e,t){this._id=e,this._eventEmitter=t,this._state={active:!1,task:{}}}static create(e,t){return new H(e,t)}logger(e,t,i={}){t.mode!==void 0&&t.mode==="debug"&&console.log(`${e}`,JSON.stringify(t,null,2),i)}staticstubHandler(e,t,i){let s=function(a,l,o){console.log(`handler ${a.handler} `,JSON.stringify({id:a.id,description:a.description,dependsOn:a.onEvent.join(",")})),o(a.publishEvent,l)};setTimeout(()=>s(e,t,i),Math.floor(Math.random()*1e3))}route(e){let t=this,i=Object.assign({},e,{lifecycle:this._id});return typeof this[i.handler]=="function"&&i.handler,function(s,a){t.publish(i.publishEvent,a)}}publish(e,t={}){console.log("lifecycleHandler.publish:",e),this._eventEmitter.publish(e,t)}subscribe(e,t){this._eventEmitter.subscribe(e,t)}subscribers(){return this._eventEmitter.subscribers()}trigger(e,t){console.log("lifecycleHandler.trigger:",e),this.publish(e,t)}}class U{constructor(e){this._id=e}static createTask(e){return typeof e.id!="string"?{task:{},err:"task.id must be type string"}:typeof e.description!="string"?{task:{},err:"task.description must be type string"}:Array.isArray(e.dependsOn)?typeof e.handler!="string"?{task:{},err:"task.handler must be type string"}:typeof e.params!="object"?{task:{},err:"task.params must be type object"}:typeof e.eventType!="string"?{task:{},err:"task.eventType must be type string"}:{task:{id:e.id,description:e.description,dependsOn:e.dependsOn,handler:e.handler,params:e.params,eventType:e.eventType,onEvent:_.map(e.dependsOn,t=>t+":done"),publishEvent:e.id+":done"},err:null}:{task:{},err:`${e.id} task.dependsOn must be type array`}}static parse(e,t){let i=[],s=[];return _.forEach(t,a=>{let{task:l,err:o}=U.createTask(a);o?s.push(o):i.push(l)}),{tasks:i,err:s}}}class ee{constructor(e){this._id=e,this._lifecycleHandler=H.create(e,I.create(e)),console.log("Pipeline started with id: "+e)}setupEventSubscriptions(e){let{tasks:t,err:i}=U.parse(this._id,e);_.forEach(t,s=>{_.forEach(s.onEvent,a=>{let l=this._lifecycleHandler.route.apply(this._lifecycleHandler,[s]);this._lifecycleHandler.subscribe(a,l)})})}listEventSubscriptions(){return this._lifecycleHandler.subscribers()}start(){console.log("start trigger"),this._lifecycleHandler.trigger("flow:create:done",{})}}function te(c){let e,t,i,s,a,l,o,d,u,b,h,f;return{c(){e=T("main"),t=T("div"),i=$(),s=T("div"),a=T("div"),l=T("button"),o=q("Button"),d=$(),u=T("div"),b=$(),h=T("div"),f=L("svg"),this.h()},l(g){e=E(g,"MAIN",{});var r=w(e);t=E(r,"DIV",{class:!0}),w(t).forEach(m),i=S(r),s=E(r,"DIV",{class:!0});var n=w(s);a=E(n,"DIV",{class:!0});var p=w(a);l=E(p,"BUTTON",{id:!0,class:!0});var y=w(l);o=Q(y,"Button"),y.forEach(m),d=S(p),u=E(p,"DIV",{id:!0}),w(u).forEach(m),p.forEach(m),b=S(n),h=E(n,"DIV",{class:!0});var x=w(h);f=z(x,"svg",{id:!0}),w(f).forEach(m),x.forEach(m),n.forEach(m),r.forEach(m),this.h()},h(){O(t,"class","support-grid"),O(l,"id","exportGlossary"),O(l,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"),O(u,"id","glossary"),O(a,"class","glossary"),O(f,"id","dag"),O(h,"class","dag"),O(s,"class","onboard")},m(g,r){R(g,e,r),v(e,t),v(e,i),v(e,s),v(s,a),v(a,l),v(l,o),v(a,d),v(a,u),v(s,b),v(s,h),v(h,f)},p:j,i:j,o:j,d(g){g&&m(e)}}}function re(c,e,t){let{data:i}=e,{anchor:s}=e;const a=new ee("wtf"),l=[{id:"bun-top",description:"bun",eventType:"app",dependsOn:[],handler:"assembleBurger",params:{}},{id:"cheese-2",description:"cheese",eventType:"app",dependsOn:["bun-top"],handler:"assembleBurger",params:{}},{id:"patty-2",description:"meat",eventType:"app",dependsOn:["cheese-2"],handler:"assembleBurger",params:{}},{id:"cheese-1",description:"cheese",eventType:"app",dependsOn:["patty-2"],handler:"assembleBurger",params:{}},{id:"patty-1",description:"meat",eventType:"app",dependsOn:["cheese-1"],handler:"assembleBurger",params:{}},{id:"bun-bottom",description:"bun",eventType:"app",dependsOn:["patty-1"],handler:"assembleBurger",params:{}}],o=[{id:"flow:start",description:"Start flow button was clicked by user",eventType:"app",dependsOn:[],handler:"flowStart",params:{}},{id:"flow:configure",description:"Configure Flow",eventType:"app",dependsOn:["flow:start"],handler:"flowConfigure",params:{variant:"release"}},{id:"flow:publish",description:"Publish Flow Configuration",eventType:"app",dependsOn:["flow:configure"],handler:"flowPublish",params:{variant:"release"}},{id:"flow:create",description:"Create Flow",eventType:"app",dependsOn:["flow:configure"],handler:"flowCreate",params:{variant:"release"}},{id:"flow:run",description:"Run flow",eventType:"app",dependsOn:["flow:create"],handler:"flowRun",params:{variant:"release"}},{id:"flow:assembly",description:"Assemble Flow Artifacts",eventType:"app",dependsOn:["flow:run"],handler:"flowAssembly",params:{variant:"release"}},{id:"flow:report",description:"Generate Flow Report",eventType:"app",dependsOn:["flow:run"],handler:"flowReport",params:{variant:"release"}},{id:"flow:upload",description:"Publish flow artifacts",eventType:"app",dependsOn:["flow:report"],handler:"flowUpload",params:{variant:"release"}}],d={text:"Select Glossary",state:{opened:!0,selected:!0},children:[{text:"Upload",data:{id:"upload",description:"Publish flow artifacts",eventType:"app",dependsOn:["assembly","report"],handler:"flowUpload",params:{variant:"release"}}},{text:"Start",data:{id:"start",description:"Start flow button was clicked by user",eventType:"app",dependsOn:[],handler:"flowStart",params:{}}},{text:"Create",data:{id:"create",description:"Create Flow",eventType:"app",dependsOn:["configure","publish"],handler:"flowCreate",params:{variant:"release"}}},{text:"Report",data:{id:"report",description:"Generate Flow Report",eventType:"app",dependsOn:["run"],handler:"flowReport",params:{variant:"release"}}},{text:"Configure",data:{id:"configure",description:"Configure Flow",eventType:"app",dependsOn:["start"],handler:"flowConfigure",params:{variant:"release"}}},{text:"Publish",data:{id:"publish",description:"Publish Flow Configuration",eventType:"app",dependsOn:["configure"],handler:"flowPublish",params:{variant:"release"}}},{text:"Run",data:{id:"run",description:"Run flow",eventType:"app",dependsOn:["create"],handler:"flowRun",params:{variant:"release"}}},{text:"Assemble",data:{id:"assemble",description:"Assemble Flow Artifacts",eventType:"app",dependsOn:["run"],handler:"flowAssembly",params:{variant:"release"}}}]};let u;return K(async()=>{u=new Z(s),u.load(i),a.setupEventSubscriptions(o),console.log("subscribers:",a.listEventSubscriptions()),a.start();let b=jQuery.jstree.defaults.contextmenu.items();console.log("glossary menu items:"+JSON.stringify(b)),jQuery("#glossary").jstree({core:{data:[d],check_callback:!0},plugins:["contextmenu","dnd","search","state","types","wholerow"]}).on("rename_node.jstree",function(h,f){console.log("you clicked jstree jquery created or renamed node "+JSON.stringify(f.node.text))}).on("delete_node.jstree",function(h,f){console.log("you clicked jstree jquery deleted node "+JSON.stringify(f.node.text))}),document.getElementById("exportGlossary").addEventListener("click",function(h){h.preventDefault(),console.log("Export Glossary"),console.log(jQuery("#glossary").jstree(!0).get_json("#",{flat:!0,no_a_attr:!0,no_state:!0,no_li_attr:!0})),u.reload(l)})}),c.$$set=b=>{"data"in b&&t(0,i=b.data),"anchor"in b&&t(1,s=b.anchor)},[i,s,a]}class ae extends D{constructor(e){super();F(this,e,re,te,G,{data:0,anchor:1,pipeline:2})}get pipeline(){return this.$$.ctx[2]}}function ne(c){let e,t,i,s,a,l,o,d,u;function b(r){c[3](r)}let h={articles:c[1]};c[0]!==void 0&&(h.open=c[0]),t=new X({props:h}),J.push(()=>M(t,"open",b));function f(r){c[4](r)}let g={};return c[0]!==void 0&&(g.sidebar=c[0]),a=new Y({props:g}),J.push(()=>M(a,"sidebar",f)),d=new ae({props:{anchor:se,data:c[2]}}),{c(){e=$(),A(t.$$.fragment),s=$(),A(a.$$.fragment),o=$(),A(d.$$.fragment),this.h()},l(r){W('[data-svelte="svelte-fckimb"]',document.head).forEach(m),e=S(r),k(t.$$.fragment,r),s=S(r),k(a.$$.fragment,r),o=S(r),k(d.$$.fragment,r),this.h()},h(){document.title="Onboard 0.1"},m(r,n){R(r,e,n),C(t,r,n),R(r,s,n),C(a,r,n),R(r,o,n),C(d,r,n),u=!0},p(r,[n]){const p={};!i&&n&1&&(i=!0,p.open=r[0],V(()=>i=!1)),t.$set(p);const y={};!l&&n&1&&(l=!0,y.sidebar=r[0],V(()=>l=!1)),a.$set(y)},i(r){u||(P(t.$$.fragment,r),P(a.$$.fragment,r),P(d.$$.fragment,r),u=!0)},o(r){N(t.$$.fragment,r),N(a.$$.fragment,r),N(d.$$.fragment,r),u=!1},d(r){r&&m(e),B(t,r),r&&m(s),B(a,r),r&&m(o),B(d,r)}}}let se="dag";function ie(c,e,t){let i=[],s=!1;const a=[{id:"start",description:"START",eventType:"app",dependsOn:[],handler:"flowStart",params:{}},{id:"configure",description:"CONFIGURRE",eventType:"app",dependsOn:["start"],handler:"flowConfigure",params:{variant:"release"}},{id:"publish",description:"PUBLISH",eventType:"app",dependsOn:["configure"],handler:"flowPublish",params:{variant:"release"}},{id:"create",description:"CREATE",eventType:"app",dependsOn:["configure","publish"],handler:"flowCreate",params:{variant:"release"}},{id:"run",description:"RUN",eventType:"app",dependsOn:["create"],handler:"flowRun",params:{variant:"release"}},{id:"assembly",description:"ASSEMBLE",eventType:"app",dependsOn:["run"],handler:"flowAssembly",params:{variant:"release"}},{id:"report",description:"GENERATE",eventType:"app",dependsOn:["run"],handler:"flowReport",params:{variant:"release"}},{id:"upload",description:"PUBLISH",eventType:"app",dependsOn:["assembly","report"],handler:"flowUpload",params:{variant:"release"}}];function l(d){s=d,t(0,s)}function o(d){s=d,t(0,s)}return[s,i,a,l,o]}class pe extends D{constructor(e){super();F(this,e,ie,ne,G,{})}}export{pe as default};
